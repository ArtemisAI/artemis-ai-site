# BizAssist – AI-Powered Small Business Dashboard

Your **intelligent command center** for sales, task management, and automated customer outreach. BizAssist combines a conversational interface, real-time KPIs, and n8n-powered workflows so owners can focus on growing the business – not wrestling with spreadsheets.

---

## Table of Contents
1. Key Features
2. System Architecture
3. Tech Stack
4. Data Model
5. API Surface
6. n8n Workflows
7. Getting Started
8. Local Development
9. Deployment (Render + Docker-Compose)
10. Roadmap & Stretch Goals

---

## 1. Key Features  ⭐

• **Chat-Driven Insights** – Ask “How were coffee bean sales this month vs. last?” and get a natural-language summary with inline charts.

• **KPI Dashboard** – Cards for revenue, orders, and overdue tasks update in near real-time via WebSockets.

• **Task Automation** – Create reminders in chat (`/remind pay rent next Friday`) that kick off an n8n flow to email / SMS.

• **Smart Alerts** – Low inventory or sluggish sales trigger push-notifications generated by the MCP service.

• **Secure Multi-Tenant** – Owners invite staff, each tenant is siloed with row-level Postgres security.

• **Mobile-First** – PWA install prompt; offline cache for last 24 h of analytics.

---

## 2. System Architecture  🏗️

```
┌─────────────┐        HTTPS         ┌──────────────────────┐
│   Browser   │◀───────────────▶   │  Next.js Front-end   │
└─────────────┘  (REST & WS)        └────────┬─────────────┘
                                             │Server-Side Props
                                             ▼
                                    ┌──────────────────────┐
                                    │  Express / API Tier  │
                                    └───────┬──────────────┘
                                            │ gRPC / REST
                                            ▼
                                ┌─────────────────────────────┐
                                │  MCP Service (business-logic)│
                                └───────┬────────┬────────────┘
                                        │        │
                                        │        ├──▶  Ollama LLM
                                        │        │     (analytics & NL)
                                        │        │
                                        └──▶  PostgreSQL
                                               (row-level tenant data)

         n8n Webhooks  ◀─────────────────┘
         (tasks / alerts)
```

Key paths:
• **/api/chat** – Streams chat responses (LLM + MCP)
• **/api/kpi** – Aggregated sales endpoints (cached)
• **/websocket** – Real-time metric updates

---

## 3. Tech Stack  🛠️

Frontend  | Backend        | Data                  | AI          | Automation | DevOps
:---------|:---------------|:----------------------|:------------|:-----------|:---------
Next.js 14 (app router) | Node.js + Express | PostgreSQL 15 + pgvector | Ollama (Llama-3) | n8n self-host | Docker Compose, Render
Tailwind + shadcn/ui | Zod / tRPC types | Prisma ORM | LangChainJS wrappers | Twilio, SendGrid | GitHub Actions (CI)

---

## 4. Data Model  🗄️

Table | Purpose | Fields (essential)
------|---------|--------------------
`users` | auth & profile | id (PK), tenant_id, email, password_hash, role
`sales` | transactions   | id, tenant_id, date, amount, product_id, channel
`tasks` | reminders      | id, tenant_id, title, due_at, completed
`conversations` | chat logs | id, tenant_id, user_id, created_at
`messages` | chat messages | id, conversation_id, role, content, tokens

Vector search uses `pgvector` column on `messages` for rapid semantic recall.

---

## 5. API Surface  📡

Endpoint | Verb | Auth | Description
---------|------|------|-------------
`/api/chat` | POST (SSE) | JWT | Streams LLM reply; body: `{prompt}`
`/api/kpi/summary?range=month` | GET | JWT | JSON with totals / deltas
`/api/task` | CRUD | JWT | Manage tasks (create from chat or UI)
`/api/webhook/n8n/:flowId` | POST | HMAC | Receive completion callbacks

Detailed OpenAPI spec lives in `/bizAssist/openapi.yaml` (to be generated).

---

## 6. n8n Workflows  ⚙️

1. **Reminder Flow** – Triggered by `task.created` webhook → format message → Twilio SMS.
2. **Weekly Digest** – Cron → query `/api/kpi/summary?range=week` → SendGrid email.
3. **Low-Stock Alert** – Webhook from MCP (`/api/webhook/n8n/stock`) → Slack channel.

Each webhook URL is stored in environment variable (`N8N_WEBHOOK_URL_*`).

---

## 7. Getting Started  🚀

Prerequisites:
• Node 20+ • Docker & Docker-Compose • pnpm (or npm/yarn)

```bash
git clone https://github.com/ArtemisAI/Artemis_Web_Portfolio
cd bizAssist
cp .env.example .env            # fill DB creds, JWT_SECRET, etc.
docker compose up -d database n8n ollama
pnpm i
pnpm dev                        # dev server on http://localhost:3000
```

Seed sample data:
```bash
pnpm prisma migrate dev --name init
pnpm prisma db seed
```

---

## 8. Local Development  🧑‍💻

Task | Script
-----|--------
Run lint & type-check | `pnpm lint && pnpm typecheck`
Unit tests (Vitest)   | `pnpm test`
Storybook             | `pnpm storybook`
Generate OpenAPI      | `pnpm openapi`

PRs must pass checks enforced by the root **pre-commit** config (eslint, prettier, commit-lint).

---

## 9. Deployment  ☁️

1. **Render Web Service** – points to `/bizAssist` folder.
2. Add **Render PostgreSQL** add-on.
3. Fill env vars (see `.env.example`).
4. Auto-deploy from `main`.

`docker-compose.prod.yml` can be used for on-prem or other cloud providers.

---

## 10. Roadmap  🛣️

• OAuth (Google / Microsoft)
• Multi-currency support
• Predictive analytics using time-series forecasting
• Voice command integration (Web Speech API)

–––

Built with ❤️ by Artemis.
